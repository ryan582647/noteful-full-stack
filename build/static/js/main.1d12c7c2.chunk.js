(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,a){},203:function(e,t,a){},205:function(e,t,a){},207:function(e,t,a){},209:function(e,t,a){},211:function(e,t,a){},213:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(77),l=a.n(r),c=a(21),i=a(22),s=a(218),d=(a(85),a(87),a(39)),u=a(12),m=a(4),f=a(5),h=a(7),p=a(6),v=a(8),N=a(216),E=a(96),b=a(10),j=a(217),y=a(28);a(91);function g(e){e.tag,e.className,e.childrenm;var t=Object(y.a)(e,["tag","className","childrenm"]);return o.a.createElement(e.tag,Object(u.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}g.defaultProps={tag:"a"};var O=o.a.createContext({notes:[],folders:[],addNote:function(){},deleteNote:function(){},addFolder:function(){},deleteFolder:function(){}}),k=(a(93),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,a=e.notes;return o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(j.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length}(a,e.id)),e.name))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(g,{tag:E.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},o.a.createElement(b.a,{icon:"plus"}),o.a.createElement("br",null),"Folder")))}}]),t}(n.Component));k.contextType=O;a(97);function _(e){return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(g,{tag:"button",role:"link",onClick:function(){return e.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement(b.a,{icon:"chevron-left"}),o.a.createElement("br",null),"Back"),e.folder&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},e.folder.name))}_.defaultProps={history:{goBack:function(){}}};var C=a(79);a(201);var F=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(O.Consumer,null,function(t){return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(E.a,{to:"/note/".concat(e.props.id)},e.props.name)),o.a.createElement("button",{className:"Note__delete",type:"button",onClick:function(){var a,n;e.props.onDeleteNote(),a=e.props.id,n=t.deleteNote,fetch("http://localhost:9090/notes/".concat(a),{method:"DELETE"}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){n(a)}).catch(function(e){console.error(e)})}},o.a.createElement(b.a,{icon:"trash-alt"})," ","remove"),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",o.a.createElement("span",{className:"Date"},Object(C.format)(e.props.modified,"Do MMM YYYY")))))})}}]),t}(n.Component);F.defaultProps={onDeleteNote:function(){}};a(203);var M=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=this.props.match.params.folderId,a=0===Object.keys(this.props.match.params).length?e:e.filter(function(e){return e.folderId===t});return o.a.createElement("section",{className:"NoteListMain"},o.a.createElement("ul",null,a.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(F,{id:e.id,name:e.name,modified:e.modified}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(g,{tag:E.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},o.a.createElement(b.a,{icon:"plus"}),o.a.createElement("br",null),"Note")))}}]),t}(n.Component);M.contextType=O;a(205);var S=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={hasError:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("error"),console.log(e),console.log("info about error"),console.log(t)}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(n.Fragment,null,o.a.createElement("h2",null,"Could not locate this note."),o.a.createElement("p",null,"Click ",o.a.createElement(E.a,{to:"/"},"here")," to go back.")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log(e),console.log("got error"),{hasError:!0}}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleDeleteNote=function(e){a.props.history.push("/")},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.match.params.noteId,t=this.context.notes.find(function(t){return t.id===e});return o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(F,{id:t.id,name:t.name,modified:t.modified,onDeleteNote:this.handleDeleteNote}),o.a.createElement(S,null,o.a.createElement("div",{className:"NotePageMain__content"},t.content.split(/\n \r|\n/).map(function(e,t){return o.a.createElement("p",{key:t},e)}))))}}]),t}(n.Component);x.defaultProps={match:{params:{}}},x.contextType=O;a(207);function P(e){var t=e.className,a=Object(y.a)(e,["className"]);return o.a.createElement("form",Object.assign({className:["Noteful-form",t].join(" "),action:"#"},a))}a(209);var V=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleSubmit=function(e){e.preventDefault();var t={name:e.target["folder-name"].value};fetch("http://localhost:9090/folders/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){a.context.addFolder(e),a.props.history.push("/folder/".concat(e.id))}).catch(function(e){console.error({error:e})})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement("section",{className:"AddFolder"},o.a.createElement("h2",null,"Create a folder"),o.a.createElement(P,{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"folder-name-input"},"Name"),o.a.createElement("input",{type:"text",id:"folder-name-input",name:"folder-name"})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{type:"submit"},"Add folder"))))}}]),t}(n.Component);function D(e){return e.hasError?o.a.createElement("div",{className:"error"},e.message):o.a.createElement(o.a.Fragment,null)}V.defaultProps={history:{push:function(){}}},V.contextType=O;a(211);var T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={name:e.target["note-name"].value,content:e.target["note-content"].value,folderId:e.target["note-folder-id"].value,modified:new Date};fetch("http://localhost:9090/notes/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){a.context.addNote(e),a.props.history.push("/folder/".concat(e.folderId))}).catch(function(e){console.error({error:e})})},a.state={noteName:"",noteContent:"",noteFolder:"",noteNameValid:!1,noteContentValid:!1,noteFolderValid:!1,formValid:!1,validationMessages:{noteTitle:"",noteContent:"",noteFolder:""}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"updateNoteName",value:function(e){var t=this;this.setState({noteName:e},function(){t.validateNoteName(e)})}},{key:"updateNoteContent",value:function(e){var t=this;this.setState({noteContent:e},function(){t.validateNoteText(e)})}},{key:"updateNoteFolder",value:function(e){var t=this;this.setState({noteFolder:e},function(){t.validateNoteFolder(e)})}},{key:"validateNoteName",value:function(e){var t=Object(u.a)({},this.state.validationMessages),a=!1;0===(e=e.trim()).length&&(t.noteTitle="Please type a note title",a=!0),this.setState({validationMessages:t,noteNameValid:!a},this.formValid)}},{key:"validateNoteText",value:function(e){var t=Object(u.a)({},this.state.validationMessages),a=!1;0===(e=e.trim()).length&&(t.noteContent="Please type some note text",a=!0),this.setState({validationMessages:t,noteContentValid:!a},this.formValid)}},{key:"validateNoteFolder",value:function(e){var t=Object(u.a)({},this.state.validationMessages),a=!1;"empty"===e&&(t.noteFolder="Please select a folder",a=!0),this.setState({validationMessages:t,noteFolderValid:!a},this.formValid)}},{key:"formValid",value:function(){this.setState({formValid:this.state.noteNameValid&&this.state.noteContentValid&&this.state.noteFolderValid})}},{key:"render",value:function(){var e=this,t=this.context.folders,a=void 0===t?[]:t;return o.a.createElement("section",{className:"AddNote"},o.a.createElement("h2",null,"Create a note"),o.a.createElement(P,{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-name-input"},"Name"),o.a.createElement("input",{type:"text",id:"note-name-input",name:"note-name",onChange:function(t){return e.updateNoteName(t.target.value)}}),o.a.createElement(D,{hasError:!this.state.noteNameValid,message:this.state.validationMessages.noteTitle})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-content-input"},"Content"),o.a.createElement("textarea",{id:"note-content-input",name:"note-content",onChange:function(t){return e.updateNoteContent(t.target.value)}}),o.a.createElement(D,{hasError:!this.state.noteContentValid,message:this.state.validationMessages.noteContent})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),o.a.createElement("select",{id:"note-folder-select",name:"note-folder-id",onChange:function(t){return e.updateNoteFolder(t.target.value)}},o.a.createElement("option",{value:"empty"},"..."),a.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})),o.a.createElement(D,{hasError:!this.state.noteFolderValid,message:this.state.validationMessages.noteFolder})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{type:"submit",disabled:!this.state.formValid},"Add note"))))}}]),t}(n.Component);T.defaultProps={history:{push:function(){}}},T.contextType=O;a(213);var w=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[]},a.setFoldersNotes=function(e){a.setState(Object(u.a)({},e))},a.addFolder=function(e){var t=Object(d.a)(a.state.folders).concat([e]);a.setState({folders:t})},a.addNote=function(e){var t=Object(d.a)(a.state.notes).concat([e]);a.setState({notes:t})},a.deleteNote=function(e){var t=a.state.notes.filter(function(t){return t.id!==e});a.setState({notes:t})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=fetch("http://localhost:9090/folders").then(function(e){return e.json()}),a=fetch("http://localhost:9090/notes").then(function(e){return e.json()}),n={folders:{},notes:{}};Promise.all([t,a]).then(function(e){return n.folders=e[0],n.notes=e[1],n}).then(function(t){e.setFoldersNotes(t)})}},{key:"renderNavRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(N.a,{exact:!0,path:e,key:e,component:k})}),o.a.createElement(N.a,{path:"/note/:noteId",component:_}),o.a.createElement(N.a,{path:"/add-folder",component:_}),o.a.createElement(N.a,{path:"/add-note",component:_}))}},{key:"renderMainRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(N.a,{exact:!0,path:e,key:e,component:M})}),o.a.createElement(N.a,{path:"/note/:noteId",component:x}),o.a.createElement(N.a,{path:"/add-folder",component:V}),o.a.createElement(N.a,{path:"/add-note",component:T}))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,addNote:this.addNote,deleteNote:this.deleteNote,addFolder:this.addFolder};return o.a.createElement(O.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(E.a,{to:"/"},"Noteful")," ",o.a.createElement(b.a,{icon:"check-double"}))),o.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(n.Component);c.b.add(i.c,i.b,i.d,i.a),l.a.render(o.a.createElement(s.a,null,o.a.createElement(w,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(215)},87:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},97:function(e,t,a){}},[[80,2,1]]]);
//# sourceMappingURL=main.1d12c7c2.chunk.js.map